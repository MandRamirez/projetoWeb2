<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments :: content}">
<div>
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h2>Cursos</h2>
    <a class="btn btn-success" th:href="@{/cursos/new}">Novo Curso</a>
  </div>

  <form class="mb-3">
    <div class="input-group">
      <label class="input-group-text" for="categoriaId">Categoria</label>
      <select class="form-select" id="categoriaId" name="categoriaId" onchange="this.form.submit()">
        <option th:selected="${categoriaSelecionada == null}" value="">Todas</option>
        <option th:each="c : ${categorias}" th:value="${c.id}" th:text="${c.nome}" th:selected="${c.id == categoriaSelecionada}"></option>
      </select>
    </div>
  </form>

  <div class="row row-cols-1 row-cols-md-3 g-3">
    <div class="col" th:each="curso : ${cursos}">
      <div class="card h-100">
        <img th:if="${curso.imagem}" th:src="${curso.imagem}" class="card-img-top" alt="imagem">
        <div class="card-body">
          <h5 class="card-title" th:text="${curso.nome}">Nome</h5>
          <p class="card-text" th:text="${#strings.abbreviate(curso.descricao, 160)}">DescriÃ§Ã£o</p>
          <a class="btn btn-primary" th:href="@{|/cursos/${curso.id}|}">Ver detalhes</a>
        </div>
      </div>
    </div>
  </div>
</div>
</html>

